{% extends 'base.html' %}

{% block content %}
<h2>{{ profile_user.username }}</h2>

{% if profile.profile_pic %}
    <img src="{{ profile.profile_pic.url }}" width="120">
{% endif %}

{% if profile.cover_pic %}
    <img src="{{ profile.cover_pic.url }}" width="400">
{% endif %}

<p><strong>Bio:</strong> {{ profile.bio }}</p>
<p><strong>Location:</strong> {{ profile.location }}</p>

<p>
    Followers: {{ profile_user.followers.count }} |
    Following: {{ profile_user.following.count }}
</p>

{% if request.user == profile_user %}
    <a href="{% url 'profiles:profile_edit' %}">Edit Profile</a>
{% else %}
    <form method="POST" action="{% url 'follows:toggle_follow' profile_user.id %}">
        {% csrf_token %}
        <button type="submit">
            {% if request.user in profile_user.followers.all.values_list('follower', flat=True) %}
                Unfollow
            {% else %}
                Follow
            {% endif %}
        </button>
    </form>
{% endif %}

<hr>

<h3>Posts</h3>

{% for post in posts %}
    {% include 'posts/post_item.html' with post=post %}
{% empty %}
    <p>No posts yet.</p>
{% endfor %}
{% endblock %}
